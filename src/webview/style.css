* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: var(--vscode-font-family);
  font-size: var(--vscode-font-size);
  color: var(--vscode-foreground);
  background: var(--vscode-sideBar-background);
  padding: 0;
}

.toolbar {
  display: flex;
  gap: 4px;
  padding: 4px 8px;
  border-bottom: 1px solid var(--vscode-sideBarSectionHeader-border);
  background: var(--vscode-sideBarSectionHeader-background);
}

.icon-button {
  background: transparent;
  border: none;
  color: var(--vscode-foreground);
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.icon-button:hover {
  background: var(--vscode-toolbar-hoverBackground);
}

.icon-button.small {
  padding: 2px;
  opacity: 0;
  transition: none;
}

.change-header:hover .icon-button.small,
.file:hover .icon-button.small {
  opacity: 1;
}

.codicon {
  font-family: codicon;
  font-size: 14px;
}

.codicon-add::before { content: "\ea60"; }
.codicon-refresh::before { content: "\eb37"; }
.codicon-bookmark::before { content: "\ea67"; }
.codicon-edit::before { content: "\ea73"; }
.codicon-go-to-file::before { content: "\ea94"; }
.codicon-chevron-right::before { content: "\eab6"; }
.codicon-chevron-down::before { content: "\eab4"; }
.codicon-github::before { content: "\ea84"; }

.github-btn {
  margin-left: auto;
}

.github-btn.authenticated {
  color: var(--vscode-gitDecoration-addedResourceForeground);
}

.log {
  padding: 4px 0 4px 6px;
  position: relative;
  z-index: 2;
}

.empty {
  padding: 16px;
  text-align: center;
  color: var(--vscode-descriptionForeground);
}

.empty-sub {
  margin-top: 6px;
  font-size: 12px;
}

.change {
  /* Node styling is handled by SVG */
}

.change-header {
  display: flex;
  align-items: center;
  gap: 0;
  padding: 0 8px 0 0;
  cursor: pointer;
  user-select: none;
  min-height: 28px;
}

.change-header-main {
  display: flex;
  align-items: center;
  min-width: 0;
  flex: 1;
}

.bookmark-trigger {
  display: inline-flex;
  align-items: center;
}

.change-header:hover {
  background: var(--vscode-list-hoverBackground);
}

.graph-cell {
  flex-shrink: 0;
  margin-right: 4px;
  display: flex;
  align-items: center;
}

.expand-icon {
  width: 14px;
  min-width: 14px;
  font-size: 14px;
  color: var(--vscode-descriptionForeground);
  flex-shrink: 0;
}

.expand-icon.hidden {
  visibility: hidden;
}

.graph-node {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  min-width: 12px;
  flex-shrink: 0;
  cursor: grab;
}

.graph-node:active {
  cursor: grabbing;
}

.graph-row {
  display: flex;
  align-items: center;
  padding: 0 8px 0 0;
  min-height: 20px;
  color: var(--vscode-descriptionForeground);
}

.graph-row.elided {
  opacity: 0.8;
  font-style: italic;
}

.graph-prefix {
  display: inline-block;
  white-space: pre;
  font-family: var(--vscode-editor-font-family);
  font-size: 12px;
  line-height: 1;
  min-width: 20px;
  margin-right: 4px;
  color: var(--vscode-textLink-foreground);
}

.graph-row-label {
  font-size: 12px;
  color: var(--vscode-descriptionForeground);
}

.graph-elided-svg {
  display: block;
}

.graph-elided-line {
  stroke: var(--vscode-descriptionForeground);
  stroke-width: 1.5;
  stroke-dasharray: 4 3;
  opacity: 1;
  stroke-linecap: round;
}

.graph-file-line {
  stroke: var(--vscode-descriptionForeground);
  stroke-width: 1;
  opacity: 1;
  stroke-linecap: round;
}

.graph-node svg {
  display: block;
  flex-shrink: 0;
}

.graph-node {
  cursor: grab;
}

.graph-node:active {
  cursor: grabbing;
}

/* Drag and drop styles */
.log.dragging-change .change {
  transition: background 120ms ease, opacity 120ms ease;
}

.log.dragging-change .change-header {
  transition: transform 140ms ease;
}

.log.dragging-change .graph-node svg {
  transition: transform 140ms ease, filter 140ms ease;
}

.log.dragging-change .change:not(.drag-source):not(.drag-descendant):not(.drag-target) {
  opacity: 0.6;
}

.change.drag-source,
.change.drag-descendant {
  opacity: 0.5;
}

.change.drag-source .graph-node svg {
  transform: scale(1.02);
}

.change.drag-target .change-header {
  background: var(--vscode-list-dropBackground);
}

.drag-badge {
  margin-left: 8px;
  padding: 2px 6px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 600;
  color: var(--vscode-textLink-foreground);
  background: color-mix(in srgb, var(--vscode-textLink-foreground) 18%, transparent);
  border: 1px solid color-mix(in srgb, var(--vscode-textLink-foreground) 40%, transparent);
  white-space: nowrap;
}

.drag-overlay {
  display: inline-flex;
  flex-direction: column;
  max-width: 360px;
  width: max-content;
  padding: 8px 10px;
  border-radius: 10px;
  background: var(--vscode-editor-background);
  color: var(--vscode-foreground);
  border: 1px solid color-mix(in srgb, var(--vscode-foreground) 15%, transparent);
  box-shadow: 0 10px 24px color-mix(in srgb, #000 35%, transparent);
}

.drag-overlay-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.drag-overlay-icon {
  font-size: 14px;
  color: var(--vscode-textLink-foreground);
}

.drag-overlay-content {
  display: flex;
  flex-direction: column;
  min-width: 0;
}

.drag-overlay-title {
  font-size: 12px;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.drag-overlay-subtitle {
  margin-top: 4px;
  font-size: 11px;
  color: var(--vscode-descriptionForeground);
}

.change-header.drag-over {
  background: var(--vscode-list-dropBackground);
}

.badge.draggable {
  cursor: grab;
}

.badge.draggable:active {
  cursor: grabbing;
}

.file {
  cursor: grab;
}

.file:active {
  cursor: grabbing;
}

.file.active {
  background: color-mix(in srgb, var(--vscode-list-activeSelectionBackground) 45%, transparent);
  border-radius: 4px;
}

.change-desc {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  margin-left: 4px;
  min-width: 100px;
}

.change-desc.placeholder {
  min-width: 4px;
}

.describe-btn {
  border: none;
  background: var(--vscode-button-secondaryBackground);
  color: var(--vscode-button-secondaryForeground);
  font-size: 11px;
  padding: 2px 6px;
  border-radius: 4px;
  cursor: pointer;
}

.describe-btn:hover {
  background: var(--vscode-button-secondaryHoverBackground);
}

.init-actions {
  margin-top: 12px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.init-btn {
  border: none;
  background: var(--vscode-button-background);
  color: var(--vscode-button-foreground);
  font-size: 13px;
  font-weight: 600;
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
}

.init-btn:hover {
  background: var(--vscode-button-hoverBackground);
}

.change-actions {
  display: none;
  gap: 2px;
  margin-left: auto;
  padding-left: 8px;
}

.change-header:hover .change-actions {
  display: flex;
}

.bookmarks {
  display: flex;
  flex-shrink: 0;
  white-space: nowrap;
  cursor: pointer;
  margin-left: 4px;
}

.bookmarks:hover .badge {
  opacity: 0.8;
}

/* Bookmark badges */
.badge {
  display: inline-block;
  padding: 1px 6px;
  border-radius: 3px;
  font-size: 11px;
  font-weight: 500;
  margin-left: 4px;
  flex-shrink: 0;
}

/* Local: not pushed yet, more visible than default badge but less than remote */
.badge.local {
  background: var(--vscode-badge-background);
  color: var(--vscode-badge-foreground);
  border: 1px solid var(--vscode-descriptionForeground);
}

/* Tracked: blue - pushed to remote but no PR */
.badge.tracked {
  background: #0969da;
  color: white;
}

/* PR Open: purple - has open PR */
.badge.pr-open {
  background: #8250df;
  color: white;
}

/* PR Draft: gray-purple - has draft PR */
.badge.pr-draft {
  background: #6e7781;
  color: white;
}

/* PR Closed: red - PR was closed without merge */
.badge.pr-closed {
  background: var(--vscode-editor-background);
  color: var(--vscode-descriptionForeground);
  border: 1px solid var(--vscode-editorWidget-border);
  opacity: 0.65;
}

/* Merged: green - PR was merged */
.badge.merged {
  background: #1a7f37;
  color: white;
}

/* Remote only: dim - only exists on remote */
.badge.remote {
  background: var(--vscode-gitDecoration-modifiedResourceForeground);
  color: var(--vscode-editor-background);
  opacity: 0.7;
}

/* Conflicted: add warning border */
.badge.conflicted {
  border: 2px solid #d29922;
}

.badge-cloud-icon {
  margin-left: 4px;
  font-size: 10px;
  vertical-align: -1px;
  position: relative;
  display: inline-block;
}

.badge-cloud-icon.codicon {
  font-size: 10px;
}

.badge-cloud-icon.diverged::after {
  content: '';
  position: absolute;
  left: -1px;
  top: 5px;
  width: 12px;
  height: 1px;
  background: currentColor;
  transform: rotate(-35deg);
  opacity: 0.9;
}

.badge-pr-icon {
  margin-left: 4px;
  font-size: 10px;
  vertical-align: -1px;
  opacity: 0.9;
}

.badge-pr-icon.codicon {
  font-size: 10px;
}

/* Clickable badges (have PR URL) */
.badge.clickable {
  cursor: pointer;
}

.badge.clickable:hover {
  opacity: 0.8;
  text-decoration: underline;
}

/* Files */
.files {
  padding-left: 0;
  padding-bottom: 4px;
  position: relative;
}

.file {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 2px 8px;
  cursor: pointer;
}

.file:hover {
  background: var(--vscode-list-hoverBackground);
}

.file-icon {
  width: 16px;
  text-align: center;
}

.file-icon .codicon {
  font-size: 14px;
}

.files-gutter {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  pointer-events: none;
}

.graph-file-svg {
  display: block;
  height: 100%;
}

.files-list {
  display: block;
  padding-left: 8px;
}

.file-icon.added { color: var(--vscode-gitDecoration-addedResourceForeground); }
.file-icon.modified { color: var(--vscode-gitDecoration-modifiedResourceForeground); }
.file-icon.deleted { color: var(--vscode-gitDecoration-deletedResourceForeground); }
.file-icon.conflict { color: var(--vscode-gitDecoration-conflictingResourceForeground); }

.file-path {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-family: var(--vscode-font-family);
  font-size: var(--vscode-font-size);
}

.file-path:hover {
  text-decoration: none;
}

/* Context menu */
.context-menu {
  background: var(--vscode-menu-background);
  border: 1px solid var(--vscode-menu-border);
  border-radius: 4px;
  padding: 4px 0;
  min-width: 160px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  z-index: 1000;
}

.context-menu-item {
  padding: 6px 12px;
  cursor: pointer;
  color: var(--vscode-menu-foreground);
  outline: none;
}

.context-menu-item:hover,
.context-menu-item:focus,
.context-menu-item:focus-visible,
.context-menu-item[data-highlighted] {
  background: var(--vscode-menu-selectionBackground);
  color: var(--vscode-menu-selectionForeground);
}

.context-menu-item.danger {
  color: var(--vscode-errorForeground);
}

.context-menu-item.danger:hover {
  background: var(--vscode-inputValidation-errorBackground);
}

.context-menu-separator {
  height: 1px;
  background: var(--vscode-menu-separatorBackground);
  margin: 4px 0;
}
